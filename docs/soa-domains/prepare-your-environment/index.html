<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.65.3" />
    <meta name="description" content="SOA domains include the deployment of various Oracle Service-Oriented Architecture (SOA) Suite components, such as SOA, Oracle Service Bus (OSB), and Oracle Enterprise Scheduler (ESS).">


    <link rel="icon" href="/fmw-kubernetes/images/favicon.png" type="image/png">

    <title>Prepare your environment :: Oracle Fusion Middleware on Kubernetes</title>

    
    <link href="/fmw-kubernetes/css/nucleus.css?1584414338" rel="stylesheet">
    <link href="/fmw-kubernetes/css/fontawesome-all.min.css?1584414338" rel="stylesheet">
    <link href="/fmw-kubernetes/css/hybrid.css?1584414338" rel="stylesheet">
    <link href="/fmw-kubernetes/css/featherlight.min.css?1584414338" rel="stylesheet">
    <link href="/fmw-kubernetes/css/perfect-scrollbar.min.css?1584414338" rel="stylesheet">
    <link href="/fmw-kubernetes/css/auto-complete.css?1584414338" rel="stylesheet">
    <link href="/fmw-kubernetes/css/atom-one-dark-reasonable.css?1584414338" rel="stylesheet">
    <link href="/fmw-kubernetes/css/theme.css?1584414338" rel="stylesheet">
    <link href="/fmw-kubernetes/css/hugo-theme.css?1584414338" rel="stylesheet">
    

    <script src="/fmw-kubernetes/js/jquery-3.3.1.min.js?1584414338"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/fmw-kubernetes/soa-domains/prepare-your-environment/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/fmw-kubernetes/">
  <img src="/fmw-kubernetes//images/fmw_12c_12_2_1_4_0-logo.png" height="100"><br/>
  <b>Oracle Fusion Middleware on Kubernetes </b>
</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/fmw-kubernetes/js/lunr.min.js?1584414338"></script>
<script type="text/javascript" src="/fmw-kubernetes/js/auto-complete.js?1584414338"></script>
<script type="text/javascript">
    
        var baseurl = "\/fmw-kubernetes\/";
    
</script>
<script type="text/javascript" src="/fmw-kubernetes/js/search.js?1584414338"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">
        <li><a  class="padding" href="/fmw-kubernetes/">Home</a></li>
        
          
          


 
  
    
    <li data-nav-id="/fmw-kubernetes/soa-domains/" title="Oracle SOA Suite" class="dd-item 
        parent
        
        
        ">
      <a href="/fmw-kubernetes/soa-domains/">
          Oracle SOA Suite
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/soa-domains/prerequisites/" title="Prerequisites" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/soa-domains/prerequisites/">
          <b>1. </b>Prerequisites
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/soa-domains/prepare-your-environment/" title="Prepare your environment" class="dd-item 
        parent
        active
        
        ">
      <a href="/fmw-kubernetes/soa-domains/prepare-your-environment/">
          <b>2. </b>Prepare your environment
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/soa-domains/create-soa-domains/" title="Create SOA domains" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/soa-domains/create-soa-domains/">
          <b>3. </b>Create SOA domains
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/soa-domains/manage-soa-domains/" title="Manage SOA Domains" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/soa-domains/manage-soa-domains/">
          <b>4. </b>Manage SOA Domains
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/manage-soa-domains/configuring-load-balancer/" title="Configuring a load balancer for SOA Domains" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/manage-soa-domains/configuring-load-balancer/">
        <b>1. </b>Configuring a load balancer for SOA Domains
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/manage-soa-domains/monitoring-soa-domains/" title="Monitoring a SOA domain" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/manage-soa-domains/monitoring-soa-domains/">
        <b>2. </b>Monitoring a SOA domain
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/manage-soa-domains/delete-domain-home/" title="Delete the SOA domain home" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/manage-soa-domains/delete-domain-home/">
        <b>3. </b>Delete the SOA domain home
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/manage-soa-domains/supportjdev/" title="Deploying SOA Composites from Oracle JDeveloper" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/manage-soa-domains/supportjdev/">
        <b>4. </b>Deploying SOA Composites from Oracle JDeveloper
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/manage-soa-domains/enablingt3/" title="Expose T3 protocol for Managed Servers" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/manage-soa-domains/enablingt3/">
        <b>5. </b>Expose T3 protocol for Managed Servers
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/manage-soa-domains/persisting-soa-adapters-customizations/" title="Persisting SOA Adapters Customizations" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/manage-soa-domains/persisting-soa-adapters-customizations/">
        <b>6. </b>Persisting SOA Adapters Customizations
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/soa-domains/patch-soa-domains/" title="Patch SOA domains" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/soa-domains/patch-soa-domains/">
          <b>5. </b>Patch SOA domains
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/soa-domains/known-issues/" title="Known Issues" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/soa-domains/known-issues/">
          <b>6. </b>Known Issues
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/soa-domains/release-notes/" title="Release Notes" class="dd-item ">
        <a href="/fmw-kubernetes/soa-domains/release-notes/">
        Release Notes
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/fmw-kubernetes/wcsites-domains/" title="Oracle WebCenter Sites" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/wcsites-domains/">
          Oracle WebCenter Sites
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/wcsites-domains/pre-requisites/" title="Pre-requisites " class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/wcsites-domains/pre-requisites/">
          <b>1. </b>Pre-requisites 
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/wcsites-domains/prepare-your-environment/" title="Prepare your environment" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/wcsites-domains/prepare-your-environment/">
          <b>2. </b>Prepare your environment
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/wcsites-domains/create-wcsites-domains/" title="Create WebCenter Sites domains" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/wcsites-domains/create-wcsites-domains/">
          <b>3. </b>Create WebCenter Sites domains
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/" title="Manage WebCenter Sites domains" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/">
          <b>4. </b>Manage WebCenter Sites domains
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/loadbalancer-traefik-setup-for-wcsites-domain-setup-on-k8s/" title="a. Using Traefik Loadbalancer" class="dd-item ">
        <a href="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/loadbalancer-traefik-setup-for-wcsites-domain-setup-on-k8s/">
        a. Using Traefik Loadbalancer
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/loadbalancer-voyager-setup-for-wcsites-domain-setup-on-k8s/" title="b. Using Voyager Loadbalancer" class="dd-item ">
        <a href="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/loadbalancer-voyager-setup-for-wcsites-domain-setup-on-k8s/">
        b. Using Voyager Loadbalancer
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/elasticsearch-integration-with-wls-operator-wls-server-logs/" title="c. ELK Integration for Logs" class="dd-item ">
        <a href="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/elasticsearch-integration-with-wls-operator-wls-server-logs/">
        c. ELK Integration for Logs
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/weblogic-logging-exporter-setup/" title="d. Publish logs to Elasticsearch" class="dd-item ">
        <a href="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/weblogic-logging-exporter-setup/">
        d. Publish logs to Elasticsearch
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/weblogic-monitoring-exporter-setup/" title="e. Monitor a WebCenter Sites domain" class="dd-item ">
        <a href="/fmw-kubernetes/wcsites-domains/manage-wcsites-domains/weblogic-monitoring-exporter-setup/">
        e. Monitor a WebCenter Sites domain
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/fmw-kubernetes/wcsites-domains/known-issues/" title="Known Issues in WCSites" class="dd-item 
        
        
        
        ">
      <a href="/fmw-kubernetes/wcsites-domains/known-issues/">
          <b>6. </b>Known Issues in WCSites
          
      </a>
      
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/fmw-kubernetes/wcsites-domains/release-notes/" title="Release Notes" class="dd-item ">
        <a href="/fmw-kubernetes/wcsites-domains/release-notes/">
        Release Notes
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    

    
    <section id="footer">
      <p>Created with <i class="fas fa-heart"></i> from <a href="https://www.oracle.com">Oracle</a></p>
<p>&nbsp;</p>
<p><a href="https://github.com/oracle/fmw-kubernetes"><i class="fab fa-github"></i> GitHub repo</a></p>
<p><a href="https://weblogic-slack-inviter.herokuapp.com/"><i class="fab fa-slack"></i> Public Slack # </a></p>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/fmw-kubernetes/'>Oracle Fusion Middleware on Kubernetes</a> > <a href='/fmw-kubernetes/soa-domains/'>Oracle SOA Suite</a> > Prepare your environment
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#set-up-your-kubernetes-cluster">Set up your Kubernetes cluster</a></li>
        <li><a href="#install-helm-and-tiller">Install Helm and Tiller</a></li>
        <li><a href="#get-dependent-images">Get dependent Images</a></li>
        <li><a href="#set-up-the-code-repository-to-deploy-oracle-soa-suite-domains">Set up the code repository to deploy Oracle SOA Suite domains</a></li>
        <li><a href="#obtaining-the-soa-suite-docker-image">Obtaining the SOA Suite Docker Image</a></li>
        <li><a href="#creating-a-soa-suite-docker-image">Creating a SOA Suite Docker image</a></li>
        <li><a href="#creating-a-custom-soa-suite-docker-image-using-imagetool">Creating a custom SOA Suite Docker image using Imagetool</a></li>
        <li><a href="#install-the-weblogic-kubernetes-operator">Install the WebLogic Kubernetes Operator</a></li>
        <li><a href="#prepare-the-environment-for-oracle-soa-suite-domains">Prepare the environment for Oracle SOA Suite Domains</a></li>
        <li><a href="#creating-a-soa-domain">Creating a SOA domain</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Prepare your environment
            </h1>
          

        




	
<div class="notices warning" ><p>Oracle SOA Suite is currently supported only for non-production use in Docker and Kubernetes.  The information provided
in this document is a <em>preview</em> for early adopters who wish to experiment with Oracle SOA Suite in Kubernetes before
it is supported for production use.</p>
</div>

<ol>
<li><a href="#set-up-your-kubernetes-cluster">Set up your Kubernetes cluster</a></li>
<li><a href="#install-helm-and-tiller">Install Helm and Tiller</a></li>
<li><a href="#get-dependent-images">Get dependent Images</a></li>
<li><a href="#set-up-the-code-repository-to-deploy-oracle-soa-suite-domains">Set up the code repository to deploy Oracle SOA Suite domains</a></li>
<li><a href="#obtaining-the-soa-suite-docker-image">Obtaining the SOA Suite Docker image</a></li>
<li><a href="#creating-a-soa-suite-docker-image">Creating a SOA Suite Docker image</a></li>
<li><a href="#creating-a-custom-soa-suite-docker-image-using-imagetool">Creating a custom SOA Suite Docker image using Imagetool</a></li>
<li><a href="#install-the-weblogic-kubernetes-operator">Install the WebLogic Kubernetes Operator</a></li>
<li><a href="#prepare-the-environment-for-oracle-soa-suite-domains">Prepare the environment for Oracle SOA Suite Domains</a>
<ol>
<li><a href="#create-a-namespace-for-soa-domain">Create a namespace for SOA Domain</a></li>
<li><a href="#create-a-persistent-storage-for-soa-domain">Create a persistent storage for SOA Domain</a></li>
<li><a href="#create-a-secret-with-domain-credentials">Create a secret with domain credentials</a></li>
<li><a href="#create-a-kubernetes-secret-with-the-rcu-credentials">Create a Kubernetes secret with the RCU credentials</a></li>
<li><a href="#configuring-access-to-your-database">Configuring access to your database</a></li>
<li><a href="#running-the-repository-creation-utility-to-set-up-your-database-schemas">Running the Repository Creation Utility to set up your database schemas</a></li>
</ol>
</li>
<li><a href="#creating-a-soa-domain">Creating a SOA domain</a></li>
</ol>
<h3 id="set-up-your-kubernetes-cluster">Set up your Kubernetes cluster</h3>
<p>If you need help setting up a Kubernetes environment, check our <a href="https://oracle.github.io/weblogic-kubernetes-operator/userguide/overview/k8s-setup/">cheat sheet</a>.</p>
<p>After creating Kubernetes clusters, you can optionally:</p>
<ul>
<li>Create load balancers to direct traffic to backend domains.</li>
<li>Configure Kibana and Elasticsearch for your operator logs.</li>
</ul>
<h3 id="install-helm-and-tiller">Install Helm and Tiller</h3>
<p>The operator uses Helm to create and deploy the necessary resources and then run the operator in a Kubernetes cluster. For Helm installation and usage information, see <a href="https://oracle.github.io/weblogic-kubernetes-operator/userguide/managing-operators/#install-helm-and-tiller">Install Helm and Tiller</a>.</p>
<h3 id="get-dependent-images">Get dependent Images</h3>
<p>Get these images and put them into your local registry.</p>
<ol>
<li>
<p>If you don&rsquo;t already have one, obtain a Docker store account, log in to the Docker store
and accept the license agreement for the <a href="https://hub.docker.com/_/oracle-weblogic-server-12c">WebLogic Server image</a>.</p>
</li>
<li>
<p>Log in to the Docker store from your Docker client:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ docker login
</code></pre></div></li>
<li>
<p>Pull the operator image:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ docker pull oracle/weblogic-kubernetes-operator:2.4.0
</code></pre></div></li>
<li>
<p>Pull the Traefik load balancer image:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ docker pull traefik:1.7.12
</code></pre></div></li>
<li>
<p>Pull the Oracle Database image:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ docker pull container-registry.oracle.com/database/enterprise:12.2.0.1-slim
$ docker tag container-registry.oracle.com/database/enterprise:12.2.0.1-slim  oracle/database:12.2.0.1
</code></pre></div></li>
</ol>
<h3 id="set-up-the-code-repository-to-deploy-oracle-soa-suite-domains">Set up the code repository to deploy Oracle SOA Suite domains</h3>
<p>Oracle SOA Suite domains deployment on Kubernetes leverages the Oracle WebLogic Kubernetes Operator infrastructure. For deploying the Oracle SOA Suite domains, you need to set up the deployment scripts as below:</p>
<ol>
<li>
<p>Create a working directory to setup the source code.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ mkdir &lt;work directory&gt;
$ cd &lt;work directory&gt;
</code></pre></div></li>
<li>
<p>Download the supported version of Oracle WebLogic Kubernetes Operator source code archieve file (<code>.zip</code>/<code>.tar.gz</code>) from the operator <a href="https://github.com/oracle/weblogic-kubernetes-operator/releases">relases page</a>. Currently the supported operator version is <a href="https://github.com/oracle/weblogic-kubernetes-operator/releases/tag/v2.4.0">2.4.0</a>.</p>
</li>
<li>
<p>Extract the source code archive file (<code>.zip</code>/<code>.tar.gz</code>) in to the work directory.</p>
</li>
<li>
<p>Download the SOA Suite kubernetes deployment scripts from the SOA <a href="https://orahub.oraclecorp.com/tooling/fmw-kubernetes.git">repository</a> and copy them in to WebLogic operator samples location.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ git clone https://orahub.oraclecorp.com/tooling/fmw-kubernetes.git
$ cp -rf &lt;work directory&gt;/fmw-kubernetes/OracleSOASuite/kubernetes/2.4.0/create-soa-domain  &lt;work directory&gt;/weblogic-kubernetes-operator-2.4.0/kubernetes/samples/scripts/
</code></pre></div></li>
</ol>
<p>You can now use the deployment scripts from <code>&lt;work directory&gt;/weblogic-kubernetes-operator-2.4.0/kubernetes/samples/scripts/</code> to set up the SOA Suite domains as further described in this document.</p>
<h3 id="obtaining-the-soa-suite-docker-image">Obtaining the SOA Suite Docker Image</h3>
<p>The pre-built Oracle SOA Suite image is available at, <code>container-registry.oracle.com/middleware/soasuite:12.2.1.4</code> (TBD).</p>
<p>To pull an image from the Oracle Container Registry, in a web browser, navigate to <a href="https://container-registry.oracle.com">https://container-registry.oracle.com</a> and log in
using the Oracle Single Sign-On authentication service. If you do not already have SSO credentials, at the top of the page, click the Sign In link to create them.</p>
<p>Use the web interface to accept the Oracle Standard Terms and Restrictions for the Oracle software images that you intend to deploy.
Your acceptance of these terms are stored in a database that links the software images to your Oracle Single Sign-On login credentials.</p>
<p>To obtain the image, log in to the Oracle Container Registry:</p>
<pre><code>$ docker login container-registry.oracle.com
</code></pre><p>Then, you can pull the image with this command:</p>
<pre><code>$ docker pull container-registry.oracle.com/middleware/soasuite:12.2.1.4
</code></pre><h3 id="creating-a-soa-suite-docker-image">Creating a SOA Suite Docker image</h3>
<p>You can also create a Docker image containing the Oracle SOA Suite binaries. This is the recommended approach if you have access to the Oracle SOA bundle patch.</p>
<p>Please consult the <a href="https://github.com/oracle/docker-images/blob/master/OracleSOASuite/dockerfiles/README.md">README</a> file for important prerequisite steps,
such as building or pulling the Server JRE Docker image, Oracle FMW Infrastructure Docker image, and downloading the Oracle SOA Suite installer and bundle patch binaries.</p>
<p>A pre-built Fusion Middleware Infrastructure image, <code>container-registry.oracle.com/middleware/fmw-infrastructure:12.2.1.4</code>, is available at <code>container-registry.oracle.com</code>. We recommend that you pull and rename this image to build the Oracle SOA Suite image.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">  $ docker pull container-registry.oracle.com/middleware/fmw-infrastructure:12.2.1.4
  $ docker tag container-registry.oracle.com/middleware/fmw-infrastructure:12.2.1.4  oracle/fmw-infrastructure:12.2.1.4
</code></pre></div><p>Follow these steps to build the necessary images - a Fusion Middleware Infrastructure image, and then the SOA Suite image as a layer on top of that:</p>
<ul>
<li>
<p>Make a local clone of the sample repository.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ git clone https://github.com/oracle/docker-images
</code></pre></div></li>
<li>
<p>Build the <code>oracle/fmw-infrastructure:12.2.1.4</code> image as shown below:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">  $ cd docker-images/OracleFMWInfrastructure/dockerfiles
  $ sh buildDockerImage.sh -v 12.2.1.4 -s
</code></pre></div><p>This will produce an image named <code>oracle/fmw-infrastructure:12.2.1.4</code>.</p>
</li>
<li>
<p>Download the Oracle SOA Suite installer, latest Oracle SOA bundle patch (<code>30638101</code> or later) from the Oracle Technology Network or e-delivery.</p>
<blockquote>
<p><strong>NOTE</strong>: Copy the installer binaries to the same location as the Dockerfile and the patch ZIP files under the <code>docker-images/OracleSOASuite/dockerfiles/12.2.1.4/patches</code> folder.</p>
</blockquote>
</li>
<li>
<p>Create the Oracle SOA Suite image by running the provided script:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd docker-images/OracleSOASuite/dockerfiles
$ ./buildDockerImage.sh -v 12.2.1.4 -s
</code></pre></div><p>The image produced will be named <code>oracle/soa:12.2.1.4</code>. The samples and instructions assume the Oracle SOA Suite image is named <code>container-registry.oracle.com/middleware/soasuite:12.2.1.4</code>. You will need to rename your image to match this name, or update the samples to refer to the image you created.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ docker tag oracle/soa:12.2.1.4 container-registry.oracle.com/middleware/soasuite:12.2.1.4
</code></pre></div><p>You can use this image to run the Repository Creation Utility and to run your domain using the “domain on a persistent volume” model.</p>
</li>
</ul>
<h3 id="creating-a-custom-soa-suite-docker-image-using-imagetool">Creating a custom SOA Suite Docker image using Imagetool</h3>
<p>Steps: To be verified and added here.</p>
<h3 id="install-the-weblogic-kubernetes-operator">Install the WebLogic Kubernetes Operator</h3>
<p>The WebLogic Kubernetes Operator supports the deployment of Oracle SOA Suite domains in Kubernetes environment. Follow the steps in this <a href="https://oracle.github.io/weblogic-kubernetes-operator/quickstart/install/">document</a> to install the operator.</p>

<div class="notices note" ><p>For early access customers, with bundle patch access, we recommend that you build and use the Oracle SOA Suite Docker image with the latest bundle patch for Oracle SOA. The Oracle SOA Suite Docker image in <code>container-registry.oracle.com</code> does not have the bundle patch installed. However, if you do not have access to the bundle patch, you can obtain the Oracle SOA Suite Docker image without the bundle patch from <code>container-registry.oracle.com</code>, as described below.</p>
</div>

<h3 id="prepare-the-environment-for-oracle-soa-suite-domains">Prepare the environment for Oracle SOA Suite Domains</h3>
<h4 id="create-a-namespace-for-soa-domain">Create a namespace for SOA Domain</h4>
<p>Create a Kubernetes namespace (for example, <code>soans</code>) for the domain unless you intend to use the default namespace. Use the newly created namespace in all the other steps.
For details, see <a href="https://oracle.github.io/weblogic-kubernetes-operator/userguide/managing-domains/prepare.md">Prepare to run a domain</a>.</p>
<pre><code> $ kubectl create namespace soans
</code></pre><h4 id="create-a-persistent-storage-for-soa-domain">Create a persistent storage for SOA Domain</h4>
<p>In the Kubernetes namespace created above, create the PV and PVC for the database by running the <a href="https://oracle.github.io/weblogic-kubernetes-operator/samples/simple/storage/_index.md">create-pv-pvc.sh</a> script. Follow the instructions for using the scripts to create a PV and PVC.</p>
<pre><code>* Change the values in the [create-pv-pvc-inputs.yaml](https://github.com/oracle/weblogic-kubernetes-operator/blob/master/kubernetes/samples/scripts/create-weblogic-domain-pv-pvc/create-pv-pvc-inputs.yaml) file based on your requirements.

* Ensure that the path for the `weblogicDomainStoragePath` property exists (if not, you need to create it),
has full access permissions, and that the folder is empty.
</code></pre>
<h4 id="create-a-secret-with-domain-credentials">Create a secret with domain credentials</h4>
<p>Create the Kubernetes secrets <code>username</code> and <code>password</code> of the administrative account in the same Kubernetes
namespace as the domain. For details, see this <a href="https://github.com/oracle/weblogic-kubernetes-operator/blob/master/kubernetes/samples/scripts/create-weblogic-domain-credentials/README.md">document</a>.</p>
<pre><code>```bash
$ cd kubernetes/samples/scripts/create-weblogic-domain-credentials
$ ./create-weblogic-credentials.sh -u weblogic -p Welcome1 -n soans -d soainfra -s soainfra-domain-credentials
```

You can check the secret with the `kubectl get secret` command. See the following example, including the output:

```bash
$ kubectl get secret soainfra-domain-credentials -o yaml -n soans
apiVersion: v1
data:
  password: V2VsY29tZTE=
  username: d2VibG9naWM=
kind: Secret
metadata:
  creationTimestamp: 2019-06-02T07:05:25Z
  labels:
    weblogic.domainName: soainfra
    weblogic.domainUID: soainfra
  name: soainfra-domain-credentials
  namespace: soans
  resourceVersion: &quot;11561988&quot;
  selfLink: /api/v1/namespaces/soans/secrets/soainfra-domain-credentials
  uid: a91ef4e1-6ca8-11e9-8143-fa163efa261a
type: Opaque
```
</code></pre>
<h4 id="create-a-kubernetes-secret-with-the-rcu-credentials">Create a Kubernetes secret with the RCU credentials</h4>
<p>You also need to create a Kubernetes secret containing the credentials for the database schemas.
When you create your domain using the sample provided below, it will obtain the RCU credentials
from this secret.</p>
<p>Use the provided sample script to create the secret as shown below:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd kubernetes/samples/scripts/create-rcu-credentials
$ ./create-rcu-credentials.sh <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -u SOA1_SOAINFRA <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -p Welcome1 <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -a sys <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -q Oradoc_db1 <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -d soainfra <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -n soans <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -s soainfra-rcu-credentials
</code></pre></div><p>The parameter values are as follows:</p>
<ul>
<li>The schema owner user name (<code>-u</code>) must be the <code>schemaPrefix</code>
value followed by an underscore and a component name, for example <code>SOA1_SOAINFRA</code>.</li>
<li>The schema owner password (<code>-p</code>) will be the password you provided for regular schema users during RCU creation.</li>
<li>The database administration user (<code>-u</code>) and password (<code>-q</code>).</li>
<li>The <code>domainUID</code> for the domain (<code>-d</code>).</li>
<li>The namespace the domain is in (<code>-n</code>); if omitted, then <code>default</code> is assumed.</li>
<li>The name of the secret (<code>-s</code>).</li>
</ul>
<p>You can confirm the secret was created as expected with the <code>kubectl get secret</code> command.
An example is shown below, including the output:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl get secret soainfra-rcu-credentials -o yaml -n soans
apiVersion: v1
data:
  password: V2VsY29tZTE<span style="color:#f92672">=</span>
  sys_password: T3JhZG9jX2RiMQ<span style="color:#f92672">==</span>
  sys_username: c3lz
  username: U09BMQ<span style="color:#f92672">==</span>
kind: Secret
metadata:
  creationTimestamp: 2019-06-02T07:15:31Z
  labels:
    weblogic.domainName: soainfra
    weblogic.domainUID: soainfra
  name: soainfra-rcu-credentials
  namespace: soans
  resourceVersion: <span style="color:#e6db74">&#34;11562794&#34;</span>
  selfLink: /api/v1/namespaces/soans/secrets/soainfra-rcu-credentials
  uid: 1230385e-6caa-11e9-8143-fa163efa261a
type: Opaque
</code></pre></div><h4 id="configuring-access-to-your-database">Configuring access to your database</h4>
<p>SOA Suite domains require a database with the necessary schemas installed in them.
The Repository Creation Utility (RCU) allows you to create
those schemas.  You must set up the database before you create your domain.
There are no additional requirements added by running SOA in Kubernetes; the
same existing requirements apply.</p>
<p>For testing and development, you may choose to run your database inside Kubernetes or outside of Kubernetes.</p>

<div class="notices warning" ><p>The Oracle Database Docker images are supported for non-production use only.
For more details, see My Oracle Support note:
Oracle Support for Database Running on Docker (Doc ID 2216342.1).</p>
</div>

<h5 id="running-the-database-inside-kubernetes">Running the database inside Kubernetes</h5>
<p>Follow these instructions to perform a basic deployment of the Oracle
database in Kubernetes. For more details about database setup and configuration, refer to this <a href="https://oracle.github.io/weblogic-kubernetes-operator/userguide/managing-fmw-domains/fmw-infra/#running-the-database-inside-kubernetes">page</a>.</p>
<p>When running the Oracle database in Kubernetes, you have an option
to attach persistent volumes (PV) so that the database storage will
be persisted across database restarts.
If you prefer not to persist the database storage, follow the instructions in this
<a href="https://github.com/oracle/weblogic-kubernetes-operator/tree/master/kubernetes/samples/scripts/create-rcu-schema#start-an-oracle-database-service-in-a-kubernetes-cluster">document</a>
to set up a database in a container with no persistent volume (PV) attached.</p>
<blockquote>
<p><strong>NOTE</strong>: <code>start-db-service.sh</code> creates the database in the <code>default</code> namespace. If you
want to create the database in a different namespace, you need to manually update
the value for all the occurrences of the namespace field in the provided
sample file <code>create-rcu-schema/common/oracle.db.yaml</code>.</p>
</blockquote>
<p>These instructions will set up the database in a container with the persistent volume (PV) attached.
If you chose not to use persistent storage, please go to the <a href="#running-the-repository-creation-utility-to-set-up-your-database-schemas">RCU creation step</a>.</p>
<ul>
<li>Create the persistent volume and persistent volume claim for the database
using the <a href="https://oracle.github.io/weblogic-kubernetes-operator/samples/simple/storage/">create-pv-pvc.sh</a> sample.
Refer to the instructions provided in that sample.</li>
</ul>

<div class="notices note" ><p>When creating the PV and PVC for the database, make sure that you use a different name
and storage class for the PV and PVC for the domain.
The name is set using the value of the <code>baseName</code> field in <code>create-pv-pvc-inputs.yaml</code>.</p>
</div>

<ul>
<li>Start the database and database service using the following commands:</li>
</ul>
<blockquote>
<p><strong>NOTE</strong>: Make sure you update the <code>kubernetes/samples/scripts/create-soa-domain/domain-home-on-pv/create-database/db-with-pv.yaml</code>
file with the name of the PVC created in the previous step. Also, update the value for all the occurrences of the namespace field
to the namespace where the database PVC was created.</p>
</blockquote>
<pre><code>```bash
$ cd weblogic-kubernetes-operator/kubernetes/samples/scripts/create-soa-domain/domain-home-on-pv/create-database
$ kubectl create -f db-with-pv.yaml
```
</code></pre>
<p>The database will take several minutes to start the first time, while it
performs setup operations.  You can watch the log to see its progress using
this command:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl logs -f oracle-db -n soans
</code></pre></div><p>A log message will indicate when the database is ready.  Also, you can
verify the database service status using this command:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl get pods,svc -n soans |grep oracle-db
po/oracle-db   1/1       Running   <span style="color:#ae81ff">0</span>          6m
svc/oracle-db   ClusterIP   None         &lt;none&gt;        1521/TCP,5500/TCP   7m
</code></pre></div><p>Before creating a domain, you will need to set up the necessary schemas in your database.</p>
<h4 id="running-the-repository-creation-utility-to-set-up-your-database-schemas">Running the Repository Creation Utility to set up your database schemas</h4>
<h5 id="creating-schemas">Creating schemas</h5>
<p>To create the database schemas for Oracle SOA Suite, run the <code>create-rcu-schema.sh</code> script as described
<a href="https://github.com/oracle/weblogic-kubernetes-operator/tree/master/kubernetes/samples/scripts/create-rcu-schema#create-the-rcu-schema-in-the-oracle-database">here</a>.</p>
<p>The following example shows commands you might use to execute <code>create-rcu-schema.sh</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd weblogic-kubernetes-operator/kubernetes/samples/scripts/create-rcu-schema
$ ./create-rcu-schema.sh <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -s SOA1 <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -t soaessosb <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -d oracle-db.soans.svc.cluster.local:1521/devpdb.k8s <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -i container-registry.oracle.com/middleware/soasuite:12.2.1.4
</code></pre></div><p>For SOA domains, the <code>create-rcu-schema.sh</code> script supports the following domain types <code>soa,osb,soaosb,soaess,soaessosb</code>.
You must specify one of these using the <code>-t</code> flag.</p>
<p>You need to make sure that you maintain the association between the database schemas and the
matching domain just like you did in a non-Kubernetes environment.  There is no specific
functionality provided to help with this.</p>
<h5 id="dropping-schemas">Dropping schemas</h5>
<p>If you want to drop the schema, you can use the <code>drop-rcu-schema.sh</code> script as described
<a href="https://github.com/oracle/weblogic-kubernetes-operator/tree/master/kubernetes/samples/scripts/create-rcu-schema#drop-the-rcu-schema-from-the-oracle-database">here</a>.</p>
<p>The following example shows commands you might use to execute <code>drop-rcu-schema.sh</code>:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ cd weblogic-kubernetes-operator/kubernetes/samples/scripts/create-rcu-schema
$ ./drop-rcu-schema.sh <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -s SOA1 <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -t soaessosb <span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>  -d oracle-db.soans.svc.cluster.local:1521/devpdb.k8s
</code></pre></div><p>For SOA domains, the <code>drop-rcu-schema.sh</code> script supports the domain types <code>soa,osb,soaosb,soaess,soaessosb</code>.
You must specify one of these using the <code>-t</code> flag.</p>
<h3 id="creating-a-soa-domain">Creating a SOA domain</h3>
<p>Now that you have your Docker images and you have created your RCU schemas, you are ready to create your domain.  To continue, follow the instructions in <a href="">Create SOA Domains</a>.</p>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/fmw-kubernetes/soa-domains/prerequisites/" title="Prerequisites"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/fmw-kubernetes/soa-domains/create-soa-domains/" title="Create SOA domains" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/fmw-kubernetes/js/clipboard.min.js?1584414338"></script>
    <script src="/fmw-kubernetes/js/perfect-scrollbar.min.js?1584414338"></script>
    <script src="/fmw-kubernetes/js/perfect-scrollbar.jquery.min.js?1584414338"></script>
    <script src="/fmw-kubernetes/js/jquery.sticky.js?1584414338"></script>
    <script src="/fmw-kubernetes/js/featherlight.min.js?1584414338"></script>
    <script src="/fmw-kubernetes/js/highlight.pack.js?1584414338"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/fmw-kubernetes/js/modernizr.custom-3.6.0.js?1584414338"></script>
    <script src="/fmw-kubernetes/js/learn.js?1584414338"></script>
    <script src="/fmw-kubernetes/js/hugo-learn.js?1584414338"></script>

    <link href="/fmw-kubernetes/mermaid/mermaid.css?1584414338" rel="stylesheet" />
    <script src="/fmw-kubernetes/mermaid/mermaid.js?1584414338"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>
